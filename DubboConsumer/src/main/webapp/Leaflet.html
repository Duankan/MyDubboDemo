<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>leaflet教程</title>
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <script src="static/js/easyui/jquery.easyui.min.js"></script>
    <script src="static/js/easyui/easyui-lang-zh_CN.js"></script>
    <!--引进leaflet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
    <style>
        /**盒子模型**/
        * {
            box-sizing: border-box;
            overflow: hidden;
        }
        body {
            width: 100%;
            height: 100vh;
        }
        .head {
            /*background: aqua;*/
            width: 100%;
            height: 10%;
        }
        .content {
            /*background: #f22613;*/
            width: 100%;
            height: 40%;
        }
        .bottom {
            /*background: yellow;*/
            width: 100%;
            height: 10%;
        }
        .select {
            width: 80px;
            height: 30px;
            border: aqua solid 2px;
        }
        .datagrid {
            width: 100%;
            height: 35%;
        }
    </style>
</head>
<body>
<div class="head"></div>
<div class="content" id="mapid"></div>
<div class="datagrid"></div>
<div class="bottom">
    <select class="select">
        <option value="ok1">1</option>
        <option value="ok2">2</option>
        <option value="ok3">3</option>
    </select>
</div>
</body>
<script>
    (function ($) {
        var winWidth;
        $(function () {
            Ready.loadGeojson();
            Ready.SelectClick();
            Ready.InitDatagrid();
        });
        var Ready = {
            //初始化地图
            initMap: function (geojsonFeature) {
                var mymap = L.map('mapid').setView([26.8231, 112.6126], 10);
                var myLayer = L.geoJSON().addTo(mymap);
                myLayer.addData(geojsonFeature);
            },
            //获取geojson数据
            loadGeojson: function () {
                $.getJSON('static/syxzq.json', function (res) {
                    if (res) {
                        Ready.initMap(res)
                    }
                });
            },
            //勾选框点击事件
            SelectClick: function () {
                $(".select").change(function () {
                    alert(this.value)
                })
            },
            //初始化datagrid
            InitDatagrid: function () {
                winWidth = $(window).width() >= 1000 ? $(window).width() : 1000;
                var width = (winWidth * 0.98 - 45) / 12;
                $('#datagrid').datagrid({
                    pagination: true,
                    rownumbers: true,
                    loadMsg: "数据正在加载中，请稍后......",
                    fit: true,        //自动大小
                    fitColumns: true, //自适应列宽
                    singleSelect: true,  //是否单选
                    idField: 'Project_id',
                    columns: [
                        [
                            {field: 'time', title: '统计时间', width: width, align: 'center', rowspan: 5,},
                            {field: 'xzqname', title: '县市区', width: width, align: 'center', rowspan: 5,},
                            {title: '行政区合计()', colspan: 10}],
                        [
                            {
                                field: 'sum', title: '总面积', width: width, align: 'center', rowspan: 4,
                            },
                            {title: '七大类用地', width: width, align: 'center', colspan: 9, rowspan: 1},
                        ],
                        [
                            {
                                field: 'gendi', title: '耕地', width: width, align: 'center', rowspan: 3,
                            },
                            {title: '六大类用地', align: 'center', colspan: 7, rowspan: 1},
                            {
                                field: 'qita', title: '其他土地', width: width, align: 'center', rowspan: 3,
                            },
                        ],
                        [
                            {
                                field: 'yuan', title: '园地', width: width, align: 'center', rowspan: 2,
                            },
                            {
                                title: '林,草', width: width, align: 'center', colspan: 3, rowspan: 1
                            },
                            {
                                field: 'jiaot', title: '交通设施', width: width, align: 'center', rowspan: 2,
                            },
                            {
                                field: 'shuili', title: '水利用地', width: width, align: 'center', rowspan: 2,
                            },
                            {
                                field: 'chenzhen', title: '城镇工矿', width: width, align: 'center', rowspan: 2,
                            },
                        ],
                        [
                            {
                                field: 'lindi', title: '林地', width: 0.95 * width, align: 'center', rowspan: 1, colspan: 2,
                            },
                            {
                                field: 'cao', title: '草地', width: width, align: 'center', rowspan: 1,
                            }
                        ]
                    ]
                });
            }
        }
    })(jQuery);
</script>
</html>